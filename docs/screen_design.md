# Speadwear 画面設計書

## 概要
このドキュメントは、Speadwearアプリケーションの画面設計を定義します。
各画面の機能、UI要素、使用するAPIエンドポイントを記載しています。

## 画面一覧

### 1. 認証関連画面

#### 1.1 ランディングページ
- **パス**: `/`
- **概要**: 未認証ユーザーが最初に訪れる画面
- **主要UI要素**:
  - アプリロゴ
  - キャッチコピー「テンションがアガル服に袖を通して1日を過ごしたい」
  - ログインボタン
  - 新規登録ボタン
  - アプリ紹介スライダー
- **使用API**: なし

#### 1.2 ログイン画面
- **パス**: `/login`
- **概要**: 既存ユーザーのログイン
- **主要UI要素**:
  - メールアドレス入力フィールド
  - パスワード入力フィールド
  - ログインボタン
  - パスワードを忘れた方リンク
  - 新規登録リンク
- **使用API**: 
  - POST `/api/v1/auth/login`
- **バリデーション**:
  - メールアドレス: 必須、メール形式
  - パスワード: 必須、8文字以上

#### 1.3 新規登録画面
- **パス**: `/signup`
- **概要**: 新規ユーザー登録
- **主要UI要素**:
  - 名前入力フィールド
  - メールアドレス入力フィールド
  - パスワード入力フィールド
  - パスワード確認入力フィールド
  - 利用規約同意チェックボックス
  - 登録ボタン
- **使用API**: 
  - POST `/api/v1/auth/signup`
- **バリデーション**:
  - 名前: 必須、1-255文字
  - メールアドレス: 必須、メール形式、重複チェック
  - パスワード: 必須、8文字以上
  - パスワード確認: パスワードと一致

#### 1.4 パスワードリセット画面
- **パス**: `/password/reset`
- **概要**: パスワードリセット用メール送信
- **主要UI要素**:
  - メールアドレス入力フィールド
  - 送信ボタン
  - ログイン画面へ戻るリンク
- **使用API**: 
  - POST `/api/v1/auth/password/reset`

### 2. メイン画面

#### 2.1 ホーム画面（タイムライン）
- **パス**: `/home`
- **概要**: フォローユーザーのコーディネート表示
- **主要UI要素**:
  - ヘッダー（ロゴ、通知アイコン、検索アイコン）
  - コーディネートカードリスト
    - ユーザー情報（アバター、名前）
    - コーディネート画像
    - いいねボタン、いいね数
    - コメントアイコン、コメント数
    - 投稿日時
  - ボトムナビゲーション
  - プルリフレッシュ
  - 無限スクロール
- **使用API**: 
  - GET `/api/v1/coordinates/timeline`
  - POST `/api/v1/coordinates/{id}/like`
  - DELETE `/api/v1/coordinates/{id}/like`

#### 2.2 検索画面
- **パス**: `/search`
- **概要**: コーディネート・ユーザー検索
- **主要UI要素**:
  - 検索バー
  - タブ切り替え（コーディネート/ユーザー）
  - フィルターボタン
  - 検索結果グリッド表示
  - フィルターモーダル
    - 季節選択
    - TPO選択
    - 色選択
    - 評価範囲
- **使用API**: 
  - GET `/api/v1/coordinates` (with filters)
  - GET `/api/v1/users` (with search query)

#### 2.3 作成選択画面
- **パス**: `/create`
- **概要**: アイテム/コーディネート作成の選択
- **主要UI要素**:
  - アイテム作成カード
  - コーディネート作成カード
  - キャンセルボタン
- **使用API**: なし

#### 2.4 マイページ
- **パス**: `/mypage`
- **概要**: 自分のプロフィールとコンテンツ管理
- **主要UI要素**:
  - プロフィールセクション
    - アバター画像
    - 名前
    - 自己紹介
    - フォロワー数、フォロー中数
    - プロフィール編集ボタン
  - タブ切り替え（アイテム/コーディネート）
  - コンテンツグリッド表示
  - 設定ボタン
- **使用API**: 
  - GET `/api/v1/auth/me`
  - GET `/api/v1/items?user_id={my_id}`
  - GET `/api/v1/coordinates?user_id={my_id}`

### 3. アイテム関連画面

#### 3.1 アイテム一覧画面
- **パス**: `/items`
- **概要**: 自分のアイテム一覧表示
- **主要UI要素**:
  - カテゴリフィルター
  - ソート選択（作成日、評価）
  - アイテムグリッド表示
    - サムネイル画像
    - アイテム名
    - カテゴリアイコン
    - 評価星
  - 新規作成FAB
- **使用API**: 
  - GET `/api/v1/items?user_id={my_id}`

#### 3.2 アイテム詳細画面
- **パス**: `/items/{id}`
- **概要**: アイテムの詳細情報表示
- **主要UI要素**:
  - アイテム画像（拡大可能）
  - アイテム名
  - カテゴリ、季節、TPO、色タグ
  - 評価表示
  - 説明文
  - メモ
  - 編集ボタン（自分のアイテムの場合）
  - 削除ボタン（自分のアイテムの場合）
- **使用API**: 
  - GET `/api/v1/items/{id}`
  - DELETE `/api/v1/items/{id}`

#### 3.3 アイテム作成/編集画面
- **パス**: `/items/new`, `/items/{id}/edit`
- **概要**: アイテムの新規作成・編集
- **主要UI要素**:
  - 画像選択エリア（カメラ/ギャラリー選択）
  - 名前入力フィールド
  - カテゴリ選択（ドロップダウン）
  - 季節選択（チップ選択）
  - TPO選択（チップ選択）
  - 色選択（カラーパレット）
  - 評価選択（星5段階）
  - 説明文入力（テキストエリア）
  - メモ入力（テキストエリア）
  - 保存ボタン
  - キャンセルボタン
- **使用API**: 
  - POST `/api/v1/items` (multipart/form-data)
  - PUT `/api/v1/items/{id}` (multipart/form-data)

### 4. コーディネート関連画面

#### 4.1 コーディネート一覧画面
- **パス**: `/coordinates`
- **概要**: コーディネート一覧表示
- **主要UI要素**:
  - フィルターボタン
  - ソート選択
  - コーディネートグリッド表示
    - サムネイル画像
    - いいね数
    - 評価表示
  - 新規作成FAB
- **使用API**: 
  - GET `/api/v1/coordinates`

#### 4.2 コーディネート詳細画面
- **パス**: `/coordinates/{id}`
- **概要**: コーディネートの詳細表示
- **主要UI要素**:
  - ユーザー情報バー
    - アバター
    - ユーザー名
    - フォローボタン
  - コーディネート画像
  - いいねボタン、いいね数
  - 季節、TPOタグ
  - 評価表示
  - 説明文
  - 使用アイテムリスト（タップで詳細へ）
  - コメントセクション
    - コメント一覧
    - コメント入力フィールド
  - 編集/削除ボタン（自分の投稿の場合）
- **使用API**: 
  - GET `/api/v1/coordinates/{id}`
  - POST `/api/v1/coordinates/{id}/like`
  - DELETE `/api/v1/coordinates/{id}/like`
  - GET `/api/v1/comments?coordinate_id={id}`
  - POST `/api/v1/comments`
  - DELETE `/api/v1/coordinates/{id}`

#### 4.3 コーディネート作成画面
- **パス**: `/coordinates/new`
- **概要**: 新規コーディネート作成
- **ステップ構成**:
  1. アイテム選択
  2. 詳細設定
  3. 確認・投稿
- **主要UI要素**:
  - ステップインジケーター
  - アイテム選択タブ（シューズ/ボトムス/トップス/アウター）
  - 選択済みアイテムプレビュー
  - 写真撮影/アップロードオプション
  - 季節選択
  - TPO選択
  - 評価選択
  - コメント入力
  - 投稿ボタン
- **使用API**: 
  - GET `/api/v1/items?user_id={my_id}&super_item={category}`
  - POST `/api/v1/coordinates`

### 5. ユーザー関連画面

#### 5.1 ユーザープロフィール画面
- **パス**: `/users/{id}`
- **概要**: 他ユーザーのプロフィール表示
- **主要UI要素**:
  - プロフィール情報
    - アバター画像
    - ユーザー名
    - 自己紹介
    - フォロワー/フォロー中数
  - フォローボタン
  - メニューボタン（ブロック、通報）
  - タブ切り替え（アイテム/コーディネート）
  - コンテンツグリッド
- **使用API**: 
  - GET `/api/v1/users/{id}`
  - POST `/api/v1/users/{id}/follow`
  - DELETE `/api/v1/users/{id}/follow`
  - POST `/api/v1/users/{id}/block`
  - GET `/api/v1/items?user_id={id}`
  - GET `/api/v1/coordinates?user_id={id}`

#### 5.2 プロフィール編集画面
- **パス**: `/profile/edit`
- **概要**: 自分のプロフィール編集
- **主要UI要素**:
  - アバター画像選択
  - 名前入力フィールド
  - 自己紹介入力（テキストエリア）
  - メールアドレス入力
  - パスワード変更セクション
    - 現在のパスワード
    - 新しいパスワード
    - パスワード確認
  - 保存ボタン
- **使用API**: 
  - PUT `/api/v1/users/{id}`
  - POST `/api/v1/users/{id}/avatar`

#### 5.3 フォロワー/フォロー中一覧画面
- **パス**: `/users/{id}/followers`, `/users/{id}/following`
- **概要**: フォロワー/フォロー中ユーザー一覧
- **主要UI要素**:
  - タブ切り替え（フォロワー/フォロー中）
  - ユーザーリスト
    - アバター
    - ユーザー名
    - フォローボタン
  - 検索バー
- **使用API**: 
  - GET `/api/v1/users/{id}/followers`
  - GET `/api/v1/users/{id}/following`
  - POST `/api/v1/users/{id}/follow`
  - DELETE `/api/v1/users/{id}/follow`

### 6. 設定関連画面

#### 6.1 設定画面
- **パス**: `/settings`
- **概要**: アプリ設定メニュー
- **主要UI要素**:
  - アカウント設定
  - 通知設定
  - プライバシー設定
  - ブロックリスト
  - ヘルプ
  - 利用規約
  - プライバシーポリシー
  - ログアウトボタン
  - アプリバージョン表示
- **使用API**: 
  - POST `/api/v1/auth/logout`

#### 6.2 通知設定画面
- **パス**: `/settings/notifications`
- **概要**: 通知の詳細設定
- **主要UI要素**:
  - プッシュ通知ON/OFFトグル
  - 通知種別ごとの設定
    - フォロー通知
    - いいね通知
    - コメント通知
  - 通知時間帯設定
- **使用API**: 
  - GET `/api/v1/users/{id}/settings`
  - PUT `/api/v1/users/{id}/settings`

#### 6.3 ブロックリスト画面
- **パス**: `/settings/blocks`
- **概要**: ブロック中のユーザー管理
- **主要UI要素**:
  - ブロック中ユーザーリスト
    - アバター
    - ユーザー名
    - ブロック解除ボタン
- **使用API**: 
  - GET `/api/v1/blocks`
  - DELETE `/api/v1/users/{id}/block`

### 7. その他の画面

#### 7.1 通知一覧画面
- **パス**: `/notifications`
- **概要**: 受信した通知の一覧
- **主要UI要素**:
  - 未読/既読タブ
  - 通知リスト
    - 送信者アバター
    - 通知内容テキスト
    - 関連コンテンツサムネイル
    - 日時
  - 全て既読にするボタン
- **使用API**: 
  - GET `/api/v1/notifications`
  - PUT `/api/v1/notifications/{id}/read`
  - PUT `/api/v1/notifications/read_all`

## 共通UI要素

### ヘッダー
- ロゴ（ホームへのリンク）
- 通知アイコン（未読バッジ付き）
- 検索アイコン

### ボトムナビゲーション
- ホーム
- 検索
- 作成（＋ボタン）
- 通知
- マイページ

### ローディング状態
- スケルトンスクリーン
- プログレスインジケーター
- プルリフレッシュインジケーター

### エラー状態
- エラーメッセージ表示
- 再試行ボタン
- エラーイラスト

### 空状態
- コンテンツなしメッセージ
- アクション誘導ボタン
- イラスト

## レスポンシブデザイン

### ブレークポイント
- モバイル: 〜767px
- タブレット: 768px〜1023px
- デスクトップ: 1024px〜

### グリッドレイアウト
- モバイル: 2カラム
- タブレット: 3カラム
- デスクトップ: 4カラム

## アクセシビリティ

### 基本方針
- WCAG 2.1 レベルAAに準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 高コントラストモード対応

### 実装項目
- 適切なARIAラベル
- フォーカス管理
- エラーメッセージの明確な表示
- タッチターゲットの最小サイズ（44x44px）

## パフォーマンス最適化

### 画像最適化
- 遅延読み込み（Lazy Loading）
- WebP形式のサポート
- レスポンシブ画像（srcset）
- サムネイルの事前生成

### データ取得
- ページネーション（20件/ページ）
- 無限スクロール
- キャッシュ戦略
- 楽観的更新（いいね、フォロー）

## セキュリティ考慮事項

### 認証・認可
- JWT認証の適切な実装
- CSRFトークンの使用
- XSS対策（入力値のサニタイズ）

### データ保護
- HTTPS通信の強制
- 個人情報の適切なマスキング
- アップロード画像のウイルススキャン